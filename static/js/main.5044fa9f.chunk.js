(this["webpackJsonpmqtt5-basic-react-web"]=this["webpackJsonpmqtt5-basic-react-web"]||[]).push([[0],{43:function(e,n,t){},50:function(e,n){},52:function(e,n){},89:function(e,n){},90:function(e,n){},96:function(e,n,t){"use strict";t.r(n);var c=t(11),a=t(37),o=t.n(a),s=(t(43),t(38)),l=t(0),i=t(1),r=t(45),p=function(e,n){return e.push("".concat(e.length,". ").concat(n)),e},d=function(e,n){var t=Object(l.a)({},e);if("change/brokerUrl"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{brokerUrl:n.payload.target.value});else if("change/username"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{username:n.payload.target.value});else if("change/password"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{password:n.payload.target.value});else if("change/publishTopic"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{publishTopic:n.payload.target.value});else if("change/responseTopic"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{responseTopic:n.payload.target.value});else if("change/message"===n.type)t=Object(l.a)(Object(l.a)({},e),{},{message:n.payload.target.value});else if("client/init"===n.type)console.log("client/init"),t=Object(l.a)(Object(l.a)({},e),{},{mqttClient:n.payload});else if("client/connect"===n.type){var c=e.mqttClient,a=e.responseTopic,o=n.payload,s=p(e.logs,"client connected: CONNACK ".concat(JSON.stringify(o)));c.subscribe(a,{},(function(e,n){})),t=Object(l.a)(Object(l.a)({},e),{},{connected:!0,logs:s})}else if("client/end"===n.type){var i=p(e.logs,"client end");t=Object(l.a)(Object(l.a)({},e),{},{mqttClient:null,connected:!1,logs:i})}else if("message/received"===n.type){var r=n.payload,d=r.message,u=r.topic;console.log("[".concat(d,"] received from topic [").concat(u,"]"));var b=p(e.logs,"message received from topic [".concat(u,"]: ").concat(d));t=Object(l.a)(Object(l.a)({},e),{},{logs:b})}else if("packet/sent"===n.type){var g=n.payload;console.log("package sent to topic [".concat(g.topic,"] : messageId [").concat(g.messageId,"]"));var m=p(e.logs,"packet sent: ".concat(JSON.stringify(g)));t=Object(l.a)(Object(l.a)({},e),{},{logs:m})}else if("packet/received"===n.type){var j=n.payload;console.log("package received to topic [".concat(j.topic,"] : messageId [").concat(j.messageId,"]"));var y=p(e.logs,"packet received: ".concat(JSON.stringify(j)));t=Object(l.a)(Object(l.a)({},e),{},{logs:y})}return t},u=function(e){return Object(i.jsxs)("div",{className:"mt-2 row",children:[Object(i.jsx)("label",{htmlFor:e.id,className:"col-sm-2 col-form-label",children:e.label}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsx)("input",{id:e.id,className:"form-control",readOnly:e.readOnly,value:e.value,onChange:e.onChange})})]})},b=function(e){var n="webclient-".concat(Math.random().toString(16).substr(2,8)),t={clientId:n,brokerUrl:e.url,username:e.username,password:e.password,publishTopic:"request/echo",responseTopic:"response/".concat(n,"/echo"),message:"GoGoGo!",mqttClient:null,connected:!1,logs:[]},a=Object(c.useReducer)(d,t),o=Object(s.a)(a,2),l=o[0],p=o[1];return Object(i.jsxs)("div",{className:"container my-3",children:[Object(i.jsx)("h2",{children:"Mqtt Test Client"}),Object(i.jsx)(u,{id:"clientId",label:"Client ID",readOnly:!0,value:l.clientId,onChange:function(e){return p({type:"change/clientId",payload:e})}}),Object(i.jsx)(u,{id:"brokerUrl",label:"Broker URL",readOnly:l.connected,value:l.brokerUrl,onChange:function(e){return p({type:"change/brokerUrl",payload:e})}}),Object(i.jsx)(u,{id:"usename",label:"Username",readOnly:l.connected,value:l.username,onChange:function(e){return p({type:"change/username",payload:e})}}),Object(i.jsx)(u,{id:"password",label:"Password",readOnly:l.connected,value:l.password,onChange:function(e){return p({type:"change/password",payload:e})}}),Object(i.jsx)(u,{id:"publishTopic",label:"Publish Topic",value:l.publishTopic,onChange:function(e){return p({type:"change/publishTopic",payload:e})}}),Object(i.jsx)(u,{id:"responseTopic",label:"Response Topic",value:l.responseTopic,onChange:function(e){return p({type:"change/responseTopic",payload:e})}}),Object(i.jsx)(u,{id:"message",label:"Message",value:l.message,onChange:function(e){return p({type:"change/message",payload:e})}}),Object(i.jsxs)("div",{className:"mt-2",children:[Object(i.jsx)("button",{className:"btn btn-primary ms-2",disabled:l.connected,onClick:function(){var e=l.clientId,n=l.username,t=l.password;if(null==l.mqttClient){var c=r.connect(l.brokerUrl,{clientId:e,reconnectPeriod:0,protocolVersion:5,username:n,password:t});c.on("error",(function(e){console.error(e)})),c.on("connect",(function(e){p({type:"client/connect",payload:e})})),c.on("message",(function(e,n,t){p({type:"message/received",payload:{topic:e,message:n,packet:t}})})),c.on("packetsend",(function(e){p({type:"packet/sent",payload:e})})),c.on("packetreceive",(function(e){console.log("package received: ".concat(JSON.stringify(e))),p({type:"packet/received",payload:e})})),c.on("disconnect",(function(e){console.log("client disconnect")})),c.on("offline",(function(){console.log("client offline")})),c.on("reconnect",(function(){console.log("client reconnect")})),c.on("close",(function(){console.log("client close")})),c.on("end",(function(){p({type:"client/end",payload:c})})),p({type:"client/init",payload:c})}},children:"Connect"}),Object(i.jsx)("button",{className:"btn btn-primary mx-2",disabled:!l.connected,onClick:function(){var e=l.mqttClient;null!=e&&e.end()},children:"Disconnect"}),Object(i.jsx)("button",{className:"btn btn-secondary me-2",disabled:!l.connected,onClick:function(){var e=l.mqttClient,n=l.publishTopic,t=l.responseTopic,c=l.message,a={retain:!0,properties:{responseTopic:t,correlationData:"".concat(Math.random().toString(16)),payloadFormatIndicator:!0,contentType:"text/plain"}};e.publish(n,c,a,(function(){console.log("message published!")}))},children:"Send message"})]}),Object(i.jsxs)("div",{className:"mt-2",children:[Object(i.jsx)("label",{htmlFor:"logs",className:"form-label",children:"Logs"}),Object(i.jsx)("textarea",{id:"logs",className:"form-control",rows:"10",readOnly:!0,value:l.logs.join("\n")})]})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,98)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,s=n.getTTFB;t(e),c(e),a(e),o(e),s(e)}))};o.a.render(Object(i.jsx)(b,{url:"wss://localhost:8001/mqtt",username:"user1",password:"hm93bqCj6xR562U"}),document.getElementById("root")),g()}},[[96,1,2]]]);
//# sourceMappingURL=main.5044fa9f.chunk.js.map